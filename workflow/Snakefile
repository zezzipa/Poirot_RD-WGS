# vim: syntax=python tabstop=4 expandtab
# vim: syntax=python tabstop=4 expandtab
# coding: utf-8

__author__ = "Jessika Nordin"
__copyright__ = "Copyright 2021, Jessika Nordin"
__email__ = "jessika.nordin@scilifelab.uu.se"
__license__ = "GPL-3"


include: "rules/common.smk"


report: "report/workflow.rst"


rule all:
    input:
        ["vcf_filter/%s.vcf.gz" % sample for sample in get_samples(samples)],
        "qc/multiqc/MultiQC.html",

#["mosdepth/%s/%s.regions.bed.gz" % panel,sample for panel in config[genepanels] for sample in get_samples(samples)]

# can change the function in common-smk to use : unpack(compile_output_list),


module prealignment:
    snakefile:
        github("hydra-genetics/prealignment", path="workflow/Snakefile", tag="develop")
    config:
        config


use rule * from prealignment as module_*


include: "rules/fq2vcf.smk"
include: "rules/vcf_filter.smk"
include: "rules/peddy.smk"


module qc:
    snakefile:
        github("hydra-genetics/qc", path="workflow/Snakefile", tag="develop")
    config:
        config

use rule multiqc from qc as module_multiqc

use rule fastqc from qc as module_fastqc

use rule picard_duplication_metrics from qc as module_pic_dup_met

use rule picard_insert_size from qc as module_pic_ins_size

use rule picard_alignment_summary_metrics from qc as module_pic_align_sum_met

#use rule samtools_stats from qc as module_samtools_stats


use rule pickard_hs_metrics from qc as module_pis_hs_met
